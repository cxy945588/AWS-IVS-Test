# 🎯 專業版使用指南

## ✅ 問題已修復

### 修復的問題
1. ✅ **本地預覽問題** - 現在在「準備攝像頭」步驟就會顯示預覽
2. ✅ **流程分離問題** - 將操作分成5個獨立步驟

---

## 📋 使用流程

### 完整流程圖

```
1️⃣ 準備攝像頭 (獲取媒體權限 + 本地預覽)
    ↓
2️⃣ 加入 Stage (連接但不推流)
    ↓
3️⃣ 開始推流 (開始直播)
    ↓
4️⃣ 停止推流 (停止但保持連線)
    ↓
5️⃣ 離開 Stage (完全斷開)
```

---

## 🎬 詳細步驟說明

### 步驟 1: 準備攝像頭 📷

**操作：** 點擊「準備攝像頭」按鈕

**會發生什麼：**
- 請求瀏覽器攝像頭和麥克風權限
- 獲取本地媒體流
- **立即顯示本地預覽** ✨
- 攝像頭狀態變為「已就緒 (預覽中)」

**此時：**
- ✅ 你可以看到自己的畫面
- ❌ 尚未連接到 Stage
- ❌ 尚未開始直播
- ❌ 觀眾看不到你

**可以做什麼：**
- 調整攝像頭角度
- 測試畫面效果
- 確認視頻/音頻正常

---

### 步驟 2: 加入 Stage 🔗

**操作：** 點擊「加入 Stage」按鈕

**會發生什麼：**
- 連接到 AWS IVS Stage
- 建立 WebRTC 連接
- Stage 狀態變為「已連線」
- **但不會開始推流** ✨

**此時：**
- ✅ 已連接到 Stage
- ✅ 本地預覽持續顯示
- ❌ 尚未推流
- ❌ 觀眾仍然看不到你

**為什麼要分開這一步？**
- 可以先確認連接正常
- 可以看到其他參與者（如果有）
- 準備好再開始推流

---

### 步驟 3: 開始推流 🎬

**操作：** 點擊「開始推流」按鈕

**會發生什麼：**
- 開始發布視頻和音頻流
- 畫面邊框變為綠色
- 顯示「🔴 LIVE」標籤
- 推流狀態變為「推流中」
- 開始計時

**此時：**
- ✅ 正在直播
- ✅ **觀眾可以看到你** ✨
- ✅ 畫面即時傳送

---

### 步驟 4: 停止推流 ⏹️

**操作：** 點擊「停止推流」按鈕

**會發生什麼：**
- 停止發布媒體流
- 「🔴 LIVE」標籤消失
- 邊框變回藍色（預覽狀態）
- 推流狀態變為「未推流」
- **但仍保持 Stage 連線** ✨

**此時：**
- ✅ 本地預覽仍可見
- ✅ 仍連接在 Stage
- ❌ 觀眾看不到你了
- ✅ 可以重新開始推流

**使用場景：**
- 暫時休息但不想斷線
- 需要調整設備
- 準備下一個環節

---

### 步驟 5: 離開 Stage 👋

**操作：** 點擊「離開 Stage」按鈕

**會發生什麼：**
- 完全斷開 Stage 連接
- Stage 狀態變為「已斷線」
- **本地預覽保持顯示** ✨

**此時：**
- ✅ 攝像頭仍在預覽中
- ❌ 已從 Stage 斷線
- ✅ 可以重新加入 Stage

---

## 🆚 與原版的對比

| 項目 | 原版 | 專業版 |
|------|------|--------|
| 本地預覽 | ❌ 無 | ✅ 有 |
| 步驟分離 | ❌ 一鍵完成 | ✅ 5步驟 |
| 流程控制 | ❌ 開始/停止 | ✅ 準備/加入/推流/停止/離開 |
| 預覽時機 | ❌ 加入後才看到 | ✅ 準備時就能看到 |
| 靈活性 | ⭐⭐ | ⭐⭐⭐⭐⭐ |

---

## 💡 使用場景

### 場景 1: 快速測試
```
1. 準備攝像頭 → 確認畫面OK
2. 加入 Stage → 確認連線OK
3. 開始推流 → 直播
```

### 場景 2: 專業直播
```
1. 準備攝像頭 → 調整角度、測試設備
2. 加入 Stage → 等待其他主播/觀眾
3. 開始推流 → 正式開播
4. 停止推流 → 中場休息
5. 重新開始推流 → 繼續直播
6. 離開 Stage → 結束
```

### 場景 3: 多段式直播
```
1. 準備攝像頭 → 設備準備
2. 加入 Stage → 建立連線
3. 開始推流 → 第一段內容
4. 停止推流 → 準備第二段
5. 開始推流 → 第二段內容
6. 停止推流 → 準備第三段
... 重複 ...
7. 離開 Stage → 完成
```

---

## 🎯 最佳實踐

### 直播前檢查清單

- [ ] 1. 點擊「準備攝像頭」
- [ ] 2. 確認本地預覽畫面清晰
- [ ] 3. 檢查視頻解析度（右下角）
- [ ] 4. 確認 Token 已輸入
- [ ] 5. 點擊「加入 Stage」
- [ ] 6. 等待「已連線」狀態
- [ ] 7. 點擊「開始推流」
- [ ] 8. 確認「🔴 LIVE」標籤出現
- [ ] 9. 開始直播內容

### 直播中監控

**注意觀察：**
- 觀看人數（實時更新）
- 推流時長
- 連線狀態
- 日誌訊息

### 直播結束流程

**選項 A: 完全結束**
```
停止推流 → 離開 Stage
```

**選項 B: 保持連線**
```
停止推流（保持連線，可快速重新開播）
```

---

## 🐛 常見問題

### Q: 為什麼要分這麼多步驟？

**A:** 更靈活的控制：
- ✅ 可以先預覽再開播
- ✅ 可以中途暫停
- ✅ 可以重新開始
- ✅ 符合專業直播流程

### Q: 和原版相比有什麼優勢？

**A:** 
1. **有本地預覽** - 不用盲目開播
2. **步驟清晰** - 每一步都知道在做什麼
3. **更安全** - 可以先測試再推流
4. **更專業** - 符合實際直播場景

### Q: 我可以跳過某些步驟嗎？

**A:** 不可以，必須按順序：
```
準備 → 加入 → 推流
```

但可以：
```
推流 → 停止 → 推流 → 停止 （重複）
```

### Q: 停止推流後還能看到自己嗎？

**A:** 可以！
- ✅ 本地預覽一直存在
- ✅ 直到你離開 Stage 或關閉瀏覽器

### Q: 如果中途網路斷線怎麼辦？

**A:** 
1. 查看日誌了解原因
2. 點擊「離開 Stage」
3. 重新「加入 Stage」
4. 重新「開始推流」

---

## 📝 檔案對比

| 檔案 | 適用場景 | 複雜度 |
|------|----------|--------|
| `broadcaster.html` | 快速測試 | ⭐⭐ |
| `broadcaster-enhanced.html` | 進階測試 | ⭐⭐⭐ |
| `broadcaster-pro.html` | **專業直播** | ⭐⭐⭐⭐ |

---

## 🚀 開始使用

### 方法 1: 直接開啟

```
開啟 broadcaster-pro.html
```

### 方法 2: 修改 index.html

編輯 `index.html`，將主播端連結改為：

```html
<a href="broadcaster-pro.html" class="btn broadcaster">📹 主播端 (專業版)</a>
```

---

## ✅ 總結

專業版解決了你提出的兩個核心問題：

1. ✅ **有本地預覽** - 在「準備攝像頭」步驟就能看到
2. ✅ **流程分離** - 加入和推流是兩個獨立步驟

**建議：**
- 🎯 測試時使用原版 `broadcaster.html`（簡單快速）
- ⭐ 實際直播使用專業版 `broadcaster-pro.html`（完整控制）

---

**需要幫助？** 查看日誌面板，裡面有詳細的步驟說明和狀態提示。

